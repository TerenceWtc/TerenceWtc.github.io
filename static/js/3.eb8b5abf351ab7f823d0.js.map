{"version":3,"sources":["webpack:///./node_modules/core-js/library/fn/array/from.js","webpack:///./src/views/games/2048/square.vue","webpack:///src/views/games/2048/square.vue","webpack:///./src/views/games/2048/square.vue?11d4","webpack:///./src/util/message.js","webpack:///src/views/games/2048/index.vue","webpack:///./src/views/games/2048/index.vue","webpack:///./src/views/games/2048/index.vue?26a2","webpack:///./node_modules/core-js/library/modules/_create-property.js","webpack:///./node_modules/core-js/library/modules/es6.array.from.js","webpack:///./node_modules/babel-runtime/core-js/array/from.js"],"names":["__webpack_require__","module","exports","Array","from","__vue_styles__","context","_2048_square","Object","component_normalizer","name","props","data","_h","this","$createElement","_self","_c","staticClass","class","value","_v","_s","message","type","arguments","length","undefined","duration","closable","Message","showClose","n","_2048","components","square","order","orderAarray","squareMatrix","score","highScore","flag","x","y","created","newGame","mounted","_this","document","onkeyup","e","old","toString","keyBoard","key","slide","operation","methods","localStorage","getItem","from_default","map","fill","add","message_message","randomIndex","index","Math","round","random","floor","randomNumber","ceil","setItem","isFull","i","includes","_i","j","_i2","_j","matrixTranspose","matrix","times","tempMatrix","$set","slideRow","squareRow","mergeArray","push","isMerged","_i3","targetIndex","getTargetIndex","previousIndex","previous","array","swipe","_2048_vue_styles_","_2048_Component","_vm","on","swipeleft","$event","swiperight","swipeup","swipedown","change","model","callback","$$v","expression","_l","item","attrs","label","click","squareRows","__webpack_exports__","$defineProperty","createDesc","object","f","ctx","$export","toObject","call","isArrayIter","toLength","createProperty","getIterFn","S","F","iter","arrayLike","result","step","iterator","O","C","aLen","mapfn","mapping","iterFn","next","done","default","__esModule"],"mappings":"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","file":"static/js/3.eb8b5abf351ab7f823d0.js","sourcesContent":["require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","function injectStyle (context) {\n  require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./square.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./square.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./square.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-89916946\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./square.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","<template>\r\n  <div class=\"square-container text-shadow\" :class=\"'color' + value\">\r\n    {{value === 0 ? '' : value}}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'square2048',\r\n  props: ['value'],\r\n  data () {\r\n    return {\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '../../../style/color.scss';\r\n.square-container {\r\n  display: flex;\r\n  margin: 1px;\r\n  height: 75px;\r\n  width: 75px;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.color {\r\n  &0 {\r\n    background-color: $Ivory;\r\n    // background-color: $Black;\r\n  }\r\n  &2 {\r\n    background-color: $Khaki;\r\n  }\r\n  &4 {\r\n    background-color: $SandyBrown;\r\n  }\r\n  &8 {\r\n    background-color: $Orange;\r\n  }\r\n  &16 {\r\n    background-color: $DarkTurquoise;\r\n  }\r\n  &32 {\r\n    background-color: $CornflowerBlue;\r\n  }\r\n  &64 {\r\n    background-color: $RoyalBlue;\r\n  }\r\n  &128 {\r\n    background-color: $Purple;\r\n  }\r\n  &256 {\r\n    background-color: $MediumSpringGreen;\r\n  }\r\n  &512 {\r\n    background-color: $LimeGreen;\r\n  }\r\n  &1024 {\r\n    background-color: $DarkCyan;\r\n  }\r\n  &2048 {\r\n    background-color: $OliveDrab;\r\n  }\r\n  &4096 {\r\n    background-color: $Violet;\r\n  }\r\n  &8192 {\r\n    background-color: $PaleVioletRed;\r\n  }\r\n  &16384 {\r\n    background-color: $FireBrick;\r\n  }\r\n  &32768 {\r\n    background-color: $Red;\r\n  }\r\n}\r\n.text-shadow{\r\n  color: $White;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"square-container text-shadow\",class:'color' + _vm.value},[_vm._v(\"\\n  \"+_vm._s(_vm.value === 0 ? '' : _vm.value)+\"\\n\")])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","import { Message } from 'element-ui'\r\n\r\n// type: success/warning/info/error\r\nexport function message (message, type = 'warning', duration = 3000, closable = false) {\r\n  Message({\r\n    showClose: closable,\r\n    message: message,\r\n    type: type,\r\n    duration: duration\r\n  })\r\n}\r\n","<template>\r\n  <v-touch class=\"touch-container\"\r\n    @swipeleft=\"swipe(0)\"\r\n    @swiperight=\"swipe(2)\"\r\n    @swipeup=\"swipe(3)\"\r\n    @swipedown=\"swipe(1)\"\r\n  >\r\n    <div>\r\n      Matrix:\r\n      <el-select v-model=\"order\" @change=\"newGame\">\r\n        <el-option\r\n          v-for=\"item in orderAarray\"\r\n          :key=\"item\"\r\n          :label=\"item\"\r\n          :value=\"item\"\r\n        />\r\n      </el-select>\r\n      <el-button @click=\"newGame\">New Game</el-button><br/>\r\n      <span>Score: {{score}}</span>\r\n      <span>High Score: {{highScore}}</span>\r\n    </div>\r\n    <div :class=\"'container' + order\">\r\n      <div class=\"box\">\r\n        <div class=\"row\" v-for=\"(squareRows, index) in squareMatrix\" :key=\"index\">\r\n          <div v-for=\"(square, index) in squareRows\" :key=\"index\">\r\n            <square :value=\"square\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- <el-button @click=\"flag = !flag\">appear</el-button>\r\n    <el-button @click=\"() => x+=100\">move right</el-button>\r\n    <span v-if=\"flag\">\r\n      <square :class=\"flag ? 'appear' : ''\" v-if=\"flag\" :value=\"2\"/>\r\n    </span>\r\n    <square :style=\"`transform:translate(${x}px,${y}px); transition: 0.3s`\" :value=\"4\"/> -->\r\n  </v-touch>\r\n</template>\r\n\r\n<script>\r\nimport Square from './square'\r\nimport { message } from '@/util/message'\r\n\r\nlet n = 4\r\n\r\nexport default {\r\n  name: 'game2048',\r\n  components: {\r\n    'square': Square\r\n  },\r\n  data () {\r\n    return {\r\n      order: 4,\r\n      orderAarray: [4, 5, 6, 7, 8],\r\n      squareMatrix: [],\r\n      score: 0,\r\n      highScore: 0,\r\n      flag: true,\r\n      x: 0,\r\n      y: 0\r\n    }\r\n  },\r\n  created () {\r\n    this.newGame()\r\n  },\r\n  mounted () {\r\n    // 全局监听键盘事件\r\n    // ↑38ArrowUp ↓40ArrowDown ←37ArrowLeft →39ArrowRight\r\n    document.onkeyup = (e) => {\r\n      let old = this.squareMatrix.toString()\r\n      let keyBoard = e.key\r\n      if (keyBoard === 'ArrowUp') {\r\n        this.slide(3)\r\n      } else if (keyBoard === 'ArrowDown') {\r\n        this.slide(1)\r\n      } else if (keyBoard === 'ArrowLeft') {\r\n        this.slide(0)\r\n      } else if (keyBoard === 'ArrowRight') {\r\n        this.slide(2)\r\n      } else {\r\n        // other key\r\n        return\r\n      }\r\n      this.operation(old)\r\n    }\r\n  },\r\n  methods: {\r\n    newGame () {\r\n      // 初始化游戏\r\n      n = this.order\r\n      this.highScore = localStorage.getItem('highScore') === undefined ? 0 : localStorage.getItem('highScore')\r\n      this.score = 0\r\n      // for (let i = 0; i < n; i++) {\r\n      //   this.$set(this.squareMatrix, i, [])\r\n      //   for (let j = 0; j < n; j++) {\r\n      //     this.$set(this.squareMatrix[i], j, 0)\r\n      //   }\r\n      // }\r\n      this.squareMatrix = Array.from(Array(n)).map(() => Array(n).fill(0))\r\n      // this.squareMatrix = [\r\n      //   [0, 2, 4, 8],\r\n      //   [128, 64, 32, 16],\r\n      //   [256, 512, 1024, 2048],\r\n      //   [32768, 16384, 8192, 4096]\r\n      // ]\r\n      // 添加两个初始化方块\r\n      this.add()\r\n      this.add()\r\n    },\r\n    operation (old) {\r\n      if (old === this.squareMatrix.toString()) {\r\n        message('No changes')\r\n        return\r\n      }\r\n      this.add()\r\n    },\r\n    randomIndex () {\r\n      // 生成下标随机数\r\n      let index = Math.round(Math.random() * (n * n - 1))\r\n      if (this.squareMatrix[(Math.floor(index / n))][(index % n)] !== 0) {\r\n        index = this.randomIndex()\r\n      }\r\n      return index\r\n    },\r\n    randomNumber () {\r\n      // 生成数值随机数\r\n      return Math.ceil(Math.random() * 2) * 2\r\n    },\r\n    add () {\r\n      // 添加方块\r\n      let index = this.randomIndex()\r\n      let value = this.randomNumber()\r\n      this.squareMatrix[(Math.floor(index / n))][(index % n)] = value\r\n      this.score = this.score + value\r\n      if (this.score > this.highScore) {\r\n        this.highScore = this.score\r\n        localStorage.setItem('highScore', this.highScore)\r\n      }\r\n      if (this.isFull()) {\r\n        message('Game Over!', 'error', 0, true)\r\n      }\r\n    },\r\n    isFull () {\r\n      // 没有0\r\n      let flag\r\n      for (let i = 0; i < n; i++) {\r\n        flag = this.squareMatrix[i].includes(0)\r\n        if (flag) {\r\n          return false\r\n        }\r\n      }\r\n      // 没有两个相邻的且值相等的\r\n      // 横向判断\r\n      for (let i = 0; i < n; i++) {\r\n        for (let j = 0; j < n - 1; j++) {\r\n          if (this.squareMatrix[i][j] === this.squareMatrix[i][j + 1]) {\r\n            return false\r\n          }\r\n        }\r\n      }\r\n      // 纵向判断\r\n      for (let i = 0; i < n - 1; i++) {\r\n        for (let j = 0; j < n; j++) {\r\n          if (this.squareMatrix[i][j] === this.squareMatrix[i + 1][j]) {\r\n            return false\r\n          }\r\n        }\r\n      }\r\n      return true\r\n    },\r\n    matrixTranspose (matrix, times) {\r\n      // 矩阵转置\r\n      times = times % n\r\n      if (times === 0) {\r\n        return matrix\r\n      }\r\n      let tempMatrix = []\r\n      for (let i = 0; i < n; i++) {\r\n        tempMatrix[i] = []\r\n        for (let j = 0; j < n; j++) {\r\n          tempMatrix[i][j] = matrix[n - 1 - j][i]\r\n        }\r\n      }\r\n      if (times > 0) {\r\n        tempMatrix = this.matrixTranspose(tempMatrix, times - 1)\r\n      }\r\n      return tempMatrix\r\n    },\r\n    slide (times) {\r\n      // <-\r\n      let tempMatrix = this.matrixTranspose(this.squareMatrix, times)\r\n      for (let i = 0; i < n; i++) {\r\n        // this.$set(this.squareMatrix, i, this.slideRow(this.squareMatrix[i]))\r\n        // tempMatrix[i] = this.slideRow(tempMatrix[i])\r\n        this.$set(tempMatrix, i, this.slideRow(tempMatrix[i]))\r\n      }\r\n      this.squareMatrix = this.matrixTranspose(tempMatrix, n - times)\r\n      // this.$set(this.squareMatrix, '', tempMatrix)\r\n    },\r\n    slideRow (squareRow) {\r\n      // 单行计算\r\n      let mergeArray = []\r\n      for (let i = 0; i < n; i++) {\r\n        mergeArray.push({\r\n          isMerged: false\r\n        })\r\n      }\r\n      for (let i = 1; i < n; i++) {\r\n        let targetIndex = this.getTargetIndex(i, squareRow)\r\n        let previousIndex = targetIndex - 1\r\n        let value = squareRow[i]\r\n        let previous = squareRow[previousIndex]\r\n        if (previous !== 0 && value === previous && !mergeArray[previousIndex].isMerged) {\r\n          mergeArray[previousIndex].isMerged = true\r\n          squareRow[previousIndex] = squareRow[previousIndex] * 2\r\n          // squareRow[targetIndex] = 0\r\n          squareRow[i] = 0\r\n        } else {\r\n          if (targetIndex !== i) {\r\n            squareRow[targetIndex] = squareRow[i]\r\n            squareRow[i] = 0\r\n          }\r\n        }\r\n      }\r\n      return squareRow\r\n    },\r\n    getTargetIndex (index, array) {\r\n      while (index > 0 && array[index - 1] === 0) {\r\n        index = index - 1\r\n      }\r\n      return index\r\n    },\r\n    swipe (value) {\r\n      let old = this.squareMatrix.toString()\r\n      this.slide(value)\r\n      this.operation(old)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$defaultLength: 77px;\r\n\r\n.touch-container {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.container {\r\n  &4 {\r\n    height: 4 * $defaultLength;\r\n    width: 4 * $defaultLength;\r\n  }\r\n  &5 {\r\n    height: 5 * $defaultLength;\r\n    width: 5 * $defaultLength;\r\n  }\r\n  &6 {\r\n    height: 6 * $defaultLength;\r\n    width: 6 * $defaultLength;\r\n  }\r\n  &7 {\r\n    height: 7 * $defaultLength;\r\n    width: 7 * $defaultLength;\r\n  }\r\n  &8 {\r\n    height: 8 * $defaultLength;\r\n    width: 8 * $defaultLength;\r\n  }\r\n}\r\n.box {\r\n  background-color: #87CEFA;\r\n}\r\n.row {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  align-items: stretch;\r\n}\r\n\r\n// square appear css\r\n.appear {\r\n  animation: appear-in .3s;\r\n}\r\n\r\n@keyframes appear-in {\r\n  0% {\r\n    transform: scale(0);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n// square appear css\r\n</style>\r\n","function injectStyle (context) {\n  require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4435d66a\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4435d66a\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4435d66a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-touch',{staticClass:\"touch-container\",on:{\"swipeleft\":function($event){return _vm.swipe(0)},\"swiperight\":function($event){return _vm.swipe(2)},\"swipeup\":function($event){return _vm.swipe(3)},\"swipedown\":function($event){return _vm.swipe(1)}}},[_c('div',[_vm._v(\"\\n    Matrix:\\n    \"),_c('el-select',{on:{\"change\":_vm.newGame},model:{value:(_vm.order),callback:function ($$v) {_vm.order=$$v},expression:\"order\"}},_vm._l((_vm.orderAarray),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.newGame}},[_vm._v(\"New Game\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"Score: \"+_vm._s(_vm.score))]),_vm._v(\" \"),_c('span',[_vm._v(\"High Score: \"+_vm._s(_vm.highScore))])],1),_vm._v(\" \"),_c('div',{class:'container' + _vm.order},[_c('div',{staticClass:\"box\"},_vm._l((_vm.squareMatrix),function(squareRows,index){return _c('div',{key:index,staticClass:\"row\"},_vm._l((squareRows),function(square,index){return _c('div',{key:index},[_c('square',{attrs:{\"value\":square}})],1)}),0)}),0)])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };"],"sourceRoot":""}