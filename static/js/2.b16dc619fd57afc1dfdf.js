(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"2rsA":function(e,t,a){"use strict";a.d(t,"a",function(){return s});var r=a("4dKj"),i="/admin/group";function s(){return Object(r.a)({url:i+"/idAndName",method:"get"})}},"43iS":function(e,t,a){"use strict";a.r(t);var r=a("gDS+"),i=a.n(r),s=a("huvH"),n=a("mRge"),l=a("JFUb");var o=function(e){a("ecJN")},u={props:["total","page","size","loading"],data:function(){return{thisPage:void 0,thisSize:void 0}},methods:{pageChange:function(e){var t=this;this.thisPage=e,this.$nextTick(function(){return t.$parent.getList()})},sizeChange:function(e){var t=this;this.thisSize=e,this.$nextTick(function(){return t.$parent.getList()})}},watch:{page:function(e){this.thisPage=e},thisPage:function(e){this.$emit("update:page",e)},size:function(e){this.thisSize=e},thisSize:function(e){this.$emit("update:size",e)}}};var c=function(e){a("n1eh")},d={data:function(){return{search:void 0,select:"username"}},methods:{addHandler:function(){this.$parent.addHandler()},detailHandler:function(){this.$parent.detailHandler()},updateHandler:function(){this.$parent.updateHandler()},deleteHandler:function(){this.$parent.deleteHandler()},searchHandler:function(){var e=[{direction:this.select,property:this.search}];this.$parent.searchHandler(e)}}};var p=function(e){a("K6I5")},m={name:"list",components:{"entity-user":Object(l.a)(n.a,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.type,visible:e.visible,"close-on-click-modal":!1,"before-close":e.closeDialog},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:"Create"==e.type?e.userRules:e.userRulesWithoutPwd,"validate-on-rule-change":!1}},[a("el-form-item",{attrs:{prop:"username",label:e.$t("label.username")}},[a("el-input",{staticClass:"width_260",attrs:{type:"text",disabled:"Create"!=e.type,placeholder:e.$t("placeholder.username")},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),e._v(" "),"Create"==e.type?a("el-form-item",{attrs:{prop:"password",label:e.$t("label.password")}},[a("el-input",{staticClass:"width_260",attrs:{type:"password",placeholder:e.$t("placeholder.password")},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1):e._e(),e._v(" "),"Create"==e.type?a("el-form-item",{attrs:{prop:"confirmPass",label:e.$t("label.confirmPass")}},[a("el-input",{staticClass:"width_260",attrs:{type:"password",placeholder:e.$t("placeholder.confirmPass")},model:{value:e.userForm.confirmPass,callback:function(t){e.$set(e.userForm,"confirmPass",t)},expression:"userForm.confirmPass"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{prop:"name",label:e.$t("label.name")}},[a("el-input",{staticClass:"width_260",attrs:{type:"text",disabled:"Detail"==e.type,placeholder:e.$t("placeholder.name")},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"email",label:e.$t("label.email")}},[a("el-input",{staticClass:"width_260",attrs:{type:"text",disabled:"Detail"==e.type,placeholder:e.$t("placeholder.email")},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"gender",label:e.$t("label.gender")}},[a("el-input",{staticClass:"width_260",attrs:{type:"text",disabled:"Detail"==e.type,placeholder:e.$t("placeholder.gender")},model:{value:e.userForm.gender,callback:function(t){e.$set(e.userForm,"gender",t)},expression:"userForm.gender"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"mobile",label:e.$t("label.mobile")}},[a("el-input",{staticClass:"width_260",attrs:{type:"text",disabled:"Detail"==e.type,placeholder:e.$t("placeholder.mobile")},model:{value:e.userForm.mobile,callback:function(t){e.$set(e.userForm,"mobile",t)},expression:"userForm.mobile"}})],1),e._v(" "),"Detail"==e.type?a("el-form-item",{attrs:{prop:"groupName",label:e.$t("label.group")}},[a("el-input",{staticClass:"width_260",attrs:{type:"text",disabled:"Detail"==e.type},model:{value:e.userForm.groupName,callback:function(t){e.$set(e.userForm,"groupName",t)},expression:"userForm.groupName"}})],1):e._e(),e._v(" "),"Detail"!=e.type?a("el-form-item",{attrs:{prop:"groupName",label:e.$t("label.group")}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userForm.groupName,callback:function(t){e.$set(e.userForm,"groupName",t)},expression:"userForm.groupName"}},e._l(e.groupList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)],1):e._e()],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.type,expression:"type == 'Create'"}],attrs:{type:"primary"},on:{click:e.addHandler}},[e._v("create")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"Update"==e.type,expression:"type == 'Update'"}],attrs:{type:"primary"},on:{click:e.updateHandler}},[e._v("update")])],1)],1)],1)},[],!1,o,null,null).exports,"my-page":Object(l.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.thisPage,"page-sizes":[1,10,20,30,50],"page-size":e.thisSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.pageChange,"size-change":e.sizeChange,"update:currentPage":function(t){e.thisPage=t},"update:current-page":function(t){e.thisPage=t}}})],1)},[],!1,c,null,null).exports,"my-header":Object(l.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top-container"},[a("div",[a("el-button",{on:{click:e.addHandler}},[e._v("add")]),e._v(" "),a("el-button",{on:{click:e.detailHandler}},[e._v("detail")]),e._v(" "),a("el-button",{on:{click:e.updateHandler}},[e._v("update")]),e._v(" "),a("el-button",{on:{click:e.deleteHandler}},[e._v("delete")])],1),e._v(" "),a("div",[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"用户名",value:"username"}}),e._v(" "),a("el-option",{attrs:{label:"姓名",value:"name"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchHandler},slot:"append"})],1)],1)])},[],!1,p,null,null).exports},data:function(){return{tableData:void 0,dialogVisible:!1,dialogType:void 0,loading:!1,pageVo:{page:1,size:10,total:0,paramsVoList:[]},multipleSelection:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0;var t=i()(this.pageVo);t=encodeURIComponent(t),Object(s.f)(t).then(function(t){e.tableData=t.data.rows,e.pageVo.total=t.data.total,e.loading=!1})},addHandler:function(){this.$refs.user.showAdd()},deleteHandler:function(){var e=this;this.multipleSelection.forEach(function(t){Object(s.b)(t.userId).then(function(){e.getList()})})},updateHandler:function(){var e=this;Object(s.c)(this.multipleSelection[0].userId).then(function(t){e.$refs.user.showUpdate(t.data)})},detailHandler:function(){var e=this;Object(s.c)(this.multipleSelection[0].userId).then(function(t){e.$refs.user.showDetail(t.data)})},searchHandler:function(e){this.pageVo.paramsVoList=e,this.getList()},selectionChangeHandler:function(e){this.multipleSelection=e}}};var h=function(e){a("5Vbx")},g=Object(l.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("my-header")],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData},on:{"selection-change":e.selectionChangeHandler}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"角色"}})],1)],1),e._v(" "),a("div",[a("my-page",{ref:"page",attrs:{total:e.pageVo.total,page:e.pageVo.page,size:e.pageVo.size,loading:e.loading},on:{"update:total":function(t){return e.$set(e.pageVo,"total",t)},"update:page":function(t){return e.$set(e.pageVo,"page",t)},"update:size":function(t){return e.$set(e.pageVo,"size",t)},"update:loading":function(t){e.loading=t}}})],1),e._v(" "),a("div",[a("entity-user",{ref:"user"})],1)])},[],!1,h,null,null);t.default=g.exports},"5Vbx":function(e,t,a){},K6I5:function(e,t,a){},ecJN:function(e,t,a){},"gDS+":function(e,t,a){e.exports={default:a("oh+g"),__esModule:!0}},mRge:function(e,t,a){"use strict";(function(e){var r=a("huvH"),i=a("xUqo"),s=a("2rsA");t.a={name:"user-template",data:function(){var e=this,t=function(t,a,r){Object(i.a)(a)?r(new Error(e.$t("regex.invalidEmail"))):r()};return{visible:!1,type:void 0,userForm:{username:"",password:"",confirmPass:"",name:"",email:"",gender:"",mobile:"",group:"",groupName:""},groupList:[],userRules:{username:[{required:!0,message:this.$t("regex.username"),trigger:"blur"},{min:4,max:20,message:this.$t("regex.length4to20"),trigger:"blur"}],password:[{required:!0,message:this.$t("regex.password"),trigger:"blur"},{min:6,max:16,message:this.$t("regex.length6to16"),trigger:"blur"},{validator:function(t,a,r){Object(i.b)(a)?r(new Error(e.$t("regex.specialPwd"))):r()},trigger:"blur"}],confirmPass:[{required:!0,message:this.$t("regex.password"),trigger:"blur"},{validator:function(t,a,r){a!==e.userForm.password?r(new Error(e.$t("regex.confirmPwd"))):r()},trigger:"blur"}],name:{required:!0,message:this.$t("regex.name"),trigger:"blur"},email:[{required:!0,message:this.$t("regex.email"),trigger:"blur"},{validator:t,trigger:"blur"}]},userRulesWithoutPwd:{name:{required:!0,message:this.$t("regex.name"),trigger:"blur"},email:[{required:!0,message:this.$t("regex.email"),trigger:"blur"},{validator:t,trigger:"blur"}]}}},created:function(){this.getGroupList()},methods:{getGroupList:function(){var e=this;Object(s.a)().then(function(t){e.groupList=t.data})},showAdd:function(){this.visible=!0,this.type=e.create},addHandler:function(){var e=this;this.$refs.userForm.validate(function(t){if(!t)return!1;Object(r.a)(e.userForm).then(function(){e.visible=!1,e.$parent.getList()})})},showUpdate:function(t){var a=this;this.visible=!0,this.type=e.update,this.$nextTick(function(){a.userForm=t})},updateHandler:function(){var e=this;this.$refs.userForm.validate(function(t){if(!t)return!1;console.log(e.userForm),Object(r.e)(e.userForm).then(function(){e.visible=!1,e.reset(),e.$parent.getList()})})},showDetail:function(t){var a=this;this.visible=!0,this.type=e.detail,this.$nextTick(function(){a.userForm=t})},reset:function(){var e=this;this.$nextTick(function(){e.$refs.userForm.resetFields(),e.userForm.password=""})},closeDialog:function(e){this.reset(),e()}}}}).call(this,a("yLpj"))},n1eh:function(e,t,a){},"oh+g":function(e,t,a){var r=a("WEpk"),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},xUqo:function(e,t,a){"use strict";function r(e){return!/^[\w]+$/.test(e)}function i(e){return!/^[\w-]+@[\w-]+(\.[\w-]+)+$/.test(e)}a.d(t,"b",function(){return r}),a.d(t,"a",function(){return i})}}]);
//# sourceMappingURL=2.b16dc619fd57afc1dfdf.js.map